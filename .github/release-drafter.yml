name-template: "v$RESOLVED_VERSION"
tag-template: "v$RESOLVED_VERSION"

template: |
  # ğŸ‰ v$RESOLVED_VERSION ($(date +'%Y-%m-%d'))
  
  ## ğŸ“‹ Commit Details
  
  $COMMIT_MESSAGES
  
  ---
  
  **ğŸ“Š Full Changelog**: https://github.com/$OWNER/$REPOSITORY/compare/$PREVIOUS_TAG...$RESOLVED_VERSION
  
  **âœ¨ Generated with â¤ï¸ by Release Drafter**

categories: []

change-template: ""

template-variables:
  COMMIT_MESSAGES: $COMMITS_TEMPLATE

replacers:
  - search: '\$COMMITS_TEMPLATE'
    replace: >-
      ${{
        const commitGroups = {
          feat: [],
          fix: [],
          docs: [],
          chore: [],
          refactor: [],
          perf: [],
          test: [],
          style: [],
          ci: [],
          build: [],
          other: []
        };

        commits.forEach(commit => {
          const message = commit.message.trim();
          const shaShort = commit.sha.substring(0, 7);
          const author = commit.author ? ` **@${commit.author.login}**` : '';
          const prNumber = commit.pull_request ? ` [#${commit.pull_request.number}]` : '';
          
          let entry = `- ${message} \`${shaShort}\`${author}${prNumber}`;
          
          // Remove conventional commit prefix for cleaner display
          let cleanMessage = message;
          const prefixMatch = message.match(/^(\w+):\s*/i);
          if (prefixMatch) {
            cleanMessage = message.substring(prefixMatch[0].length);
            entry = `- ${cleanMessage} \`${shaShort}\`${author}${prNumber}`;
          }

          if (message.toLowerCase().startsWith('feat:') || message.toLowerCase().startsWith('feature:')) {
            commitGroups.feat.push(entry);
          } else if (message.toLowerCase().startsWith('fix:') || message.toLowerCase().startsWith('bug:')) {
            commitGroups.fix.push(entry);
          } else if (message.toLowerCase().startsWith('docs:') || message.toLowerCase().includes('documentation')) {
            commitGroups.docs.push(entry);
          } else if (message.toLowerCase().startsWith('chore:')) {
            commitGroups.chore.push(entry);
          } else if (message.toLowerCase().startsWith('refactor:')) {
            commitGroups.refactor.push(entry);
          } else if (message.toLowerCase().startsWith('perf:') || message.toLowerCase().includes('performance')) {
            commitGroups.perf.push(entry);
          } else if (message.toLowerCase().startsWith('test:')) {
            commitGroups.test.push(entry);
          } else if (message.toLowerCase().startsWith('style:')) {
            commitGroups.style.push(entry);
          } else if (message.toLowerCase().startsWith('ci:') || message.toLowerCase().includes('github actions')) {
            commitGroups.ci.push(entry);
          } else if (message.toLowerCase().startsWith('build:')) {
            commitGroups.build.push(entry);
          } else {
            commitGroups.other.push(entry);
          }
        });

        let output = '';
        
        if (commitGroups.feat.length > 0) {
          output += '### ğŸš€ New Features\n' + commitGroups.feat.join('\n') + '\n\n';
        }
        if (commitGroups.fix.length > 0) {
          output += '### ğŸ› Bug Fixes\n' + commitGroups.fix.join('\n') + '\n\n';
        }
        if (commitGroups.perf.length > 0) {
          output += '### âš¡ Performance Boost\n' + commitGroups.perf.join('\n') + '\n\n';
        }
        if (commitGroups.refactor.length > 0) {
          output += '### ğŸ”§ Code Refactoring\n' + commitGroups.refactor.join('\n') + '\n\n';
        }
        if (commitGroups.docs.length > 0) {
          output += '### ğŸ“š Documentation Updates\n' + commitGroups.docs.join('\n') + '\n\n';
        }
        if (commitGroups.test.length > 0) {
          output += '### âœ… Tests & Quality\n' + commitGroups.test.join('\n') + '\n\n';
        }
        if (commitGroups.style.length > 0) {
          output += '### ğŸ’… Code Style Improvements\n' + commitGroups.style.join('\n') + '\n\n';
        }
        if (commitGroups.ci.length > 0) {
          output += '### ğŸ”„ CI/CD Updates\n' + commitGroups.ci.join('\n') + '\n\n';
        }
        if (commitGroups.build.length > 0) {
          output += '### ğŸ“¦ Build System\n' + commitGroups.build.join('\n') + '\n\n';
        }
        if (commitGroups.chore.length > 0) {
          output += '### ğŸ§¹ Maintenance & Chores\n' + commitGroups.chore.join('\n') + '\n\n';
        }
        if (commitGroups.other.length > 0) {
          output += '### ğŸŒŸ Other Changes\n' + commitGroups.other.join('\n') + '\n\n';
        }

        // Add summary if no commits found
        if (output.trim() === '') {
          output = '### ğŸ“ No significant changes in this release\n';
          output += 'This release contains minor updates and maintenance tasks.';
        }

        return output.trim();
      }}

include-paths: []
exclude-labels: ["skip-changelog"]
sort-direction: ascending
sort-by: committed_date
